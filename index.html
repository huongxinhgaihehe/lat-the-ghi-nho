<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üß† Tr√≤ ch∆°i L·∫≠t Th·∫ª Ghi Nh·ªõ</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: url("https://imgnvsk.vnanet.vn/MediaUpload/Content/2024/01/19/z5085604077580-b9b36aa6411149611722cc8dafa7db7319-10-26-58.jpg") no-repeat center center fixed;
      background-size: cover;
      overflow-x: hidden;
    }

    /* CARD */
    .card {
      width: 150px;
      height: 150px;
      perspective: 800px;
    }
    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
      transition: transform 0.4s;
    }
    .flipped .card-inner {
      transform: rotateY(180deg);
    }
    .card-front,
    .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 0.5rem;
      backface-visibility: hidden;
    }
    .card-front {
      background-color: #1f2937;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      color: #fff;
    }
    .card-back {
      transform: rotateY(180deg);
      background-size: cover;
      background-position: center;
      border: 3px solid #3b82f6;
    }
    .matched {
      visibility: hidden;
    }

    /* Fireworks */
    #fireworks {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 100;
      display: none;
    }

    /* Victory screen */
    #final-display {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 200;
      display: none;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      text-align: center;
      color: white;
      background: transparent !important;
    }
    #final-display img {
      max-width: 400px;
      border-radius: 1rem;
      margin-bottom: 20px;
      box-shadow: 0 0 40px rgba(255,255,255,0.8);
      transform: scale(1.05);
    }
    #final-display p {
      font-size: 1.3rem;
      max-width: 600px;
      line-height: 1.6;
      color: #e0e0e0;
    }
    #win-text {
      font-size: 5rem;
      font-weight: bold;
      margin-bottom: 30px;
      color: #00ffff;
      text-shadow: 0 0 30px #00ffff, 0 0 60px #ff00ff;
      animation: pulse 1.5s infinite alternate;
    }
    @keyframes pulse {
      from { transform: scale(1); opacity: 1; }
      to { transform: scale(1.1); opacity: 0.8; }
    }

    /* Lose popup */
    #lose-popup {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.7);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 300;
    }
    #lose-popup .content {
      background: #1f2937;
      padding: 40px;
      border-radius: 20px;
      text-align: center;
      color: white;
      box-shadow: 0 0 20px rgba(255,255,255,0.5);
      animation: popupIn 0.5s ease;
    }
    @keyframes popupIn {
      from { transform: scale(0.7); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    /* Responsive */
    @media (max-width: 1024px) {
      #game-board {
        grid-template-columns: repeat(4, 1fr) !important;
      }
      .card {
        width: 120px;
        height: 120px;
      }
      #final-display img {
        max-width: 300px;
      }
    }
    @media (max-width: 768px) {
      body {
        padding: 1rem;
      }
      #main-content {
        flex-direction: column;
        align-items: center;
      }
      #game-board {
        grid-template-columns: repeat(3, 1fr) !important;
      }
      .card {
        width: 100px;
        height: 100px;
      }
      #final-display img {
        max-width: 250px;
      }
      #win-text {
        font-size: 3rem;
      }
    }
    @media (max-width: 480px) {
      .card {
        width: 80px;
        height: 80px;
      }
      #game-board {
        grid-template-columns: repeat(3, 1fr) !important;
        gap: 0.5rem;
      }
      #win-text {
        font-size: 2.5rem;
      }
    }
  </style>
</head>
<body class="bg-gray-900 bg-opacity-70 text-white min-h-screen flex flex-col items-center justify-center p-6">
  <canvas id="fireworks"></canvas>

  <div id="main-content" class="flex flex-col items-center">
    <h1 class="text-5xl font-bold mb-3 text-yellow-300 drop-shadow-lg text-center">üß† Tr√≤ ch∆°i L·∫≠t Th·∫ª Ghi Nh·ªõ</h1>
    <p class="text-lg text-gray-200 mb-6 text-center">L·∫≠t 2 th·∫ª gi·ªëng nhau ƒë·ªÉ xem m√¥ t·∫£ ·∫£nh!</p>

    <div class="flex flex-col md:flex-row gap-6 justify-center items-start w-full max-w-6xl">
      <div id="game-board" class="grid grid-cols-5 gap-5 bg-gray-800 bg-opacity-80 p-6 rounded-lg shadow-lg mx-auto"></div>

      <div class="md:w-1/3 w-full text-center">
        <div class="bg-gray-800 bg-opacity-80 rounded-lg p-4 shadow-lg">
          <h2 class="text-xl font-semibold mb-3 text-blue-300">M√¥ t·∫£ ·∫£nh</h2>
          <img id="preview-img" src="" alt="" class="hidden rounded-lg mb-3 mx-auto">
          <p id="description" class="text-gray-300">Ch∆∞a c√≥ g√¨ ƒë·ªÉ hi·ªÉn th·ªã.</p>
        </div>
        <div class="mt-6 bg-gray-800 bg-opacity-80 p-4 rounded-lg shadow-lg text-lg">
          <div>‚è±Ô∏è Th·ªùi gian c√≤n l·∫°i: <span id="time" class="text-blue-400 font-bold">02:00</span></div>
          <div>‚úÖ C·∫∑p ƒë√∫ng: <span id="score" class="text-green-400 font-bold">0</span>/10</div>
        </div>
        <button id="restart" class="mt-6 bg-blue-600 hover:bg-blue-700 py-2 px-6 rounded-lg font-bold text-white shadow-md">Ch∆°i l·∫°i</button>
      </div>
    </div>
  </div>

  <div id="final-display" class="flex">
    <div id="win-text">üéâ CHI·∫æN TH·∫ÆNG üéâ</div>
    <img id="final-img" src="" alt="">
    <p id="final-desc"></p>
    <button id="play-again" class="mt-8 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg text-xl">Ch∆°i l·∫°i</button>
  </div>

  <div id="lose-popup" class="flex">
    <div class="content">
      <h2 class="text-4xl font-bold text-red-400 mb-4">H·∫æT GI·ªú!</h2>
      <p class="text-lg mb-6">R·∫•t ti·∫øc, b·∫°n ch∆∞a ho√†n th√†nh tr√≤ ch∆°i.</p>
      <button id="retry" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg text-xl">Ch∆°i l·∫°i</button>
    </div>
  </div>

  <script>
    const cardsData = [
      { img: "https://bcp.cdnchinhphu.vn/thumb_w/777/Uploaded/buithuhuong/2020_01_20/thanh%20lap%20dang.jpg", desc: "L√£nh t·ª• Nguy·ªÖn √Åi Qu·ªëc tri·ªáu t·∫≠p h·ªôi ngh·ªã th√†nh l·∫≠p ƒê·∫£ng C·ªông s·∫£n Vi·ªát Nam ng√†y 3/2/1930." },
      { img: "https://bcp.cdnchinhphu.vn/thumb_w/777/Uploaded/buithuhuong/2020_01_20/tuyen%20ngon%20doc%20lap.jpg", desc: "Ng√†y 2/9/1945, H·ªì Ch·ªß t·ªãch ƒë·ªçc Tuy√™n ng√¥n ƒë·ªôc l·∫≠p, khai sinh n∆∞·ªõc Vi·ªát Nam D√¢n ch·ªß C·ªông h√≤a." },
      { img: "https://bcp.cdnchinhphu.vn/thumb_w/777/Uploaded/buithuhuong/2020_01_20/dai%20hoi%20VI.jpg", desc: "ƒê·∫°i h·ªôi VI c·ªßa ƒê·∫£ng (nƒÉm 1986) ‚Äì ƒê·∫°i h·ªôi c·ªßa c√¥ng cu·ªôc ƒê·ªïi m·ªõi." },
      { img: "https://hnm.1cdn.vn/2025/01/29/dien-bien-phu.jpg", desc: "Chi·∫øn th·∫Øng ƒêi·ªán Bi√™n Ph·ªß l√† minh ch·ª©ng h√πng h·ªìn cho s·ª± l√£nh ƒë·∫°o t√†i t√¨nh c·ªßa ƒê·∫£ng." },
      { img: "https://hnm.1cdn.vn/2025/01/29/8-1-.jpg", desc: "Tr∆∞a 30/4/1975, xe tƒÉng c·ªßa Qu√¢n Gi·∫£i ph√≥ng ti·∫øn v√†o Dinh ƒê·ªôc L·∫≠p, th·ªëng nh·∫•t ƒë·∫•t n∆∞·ªõc." },
      { img: "https://resource.kinhtedothi.vn/2021/12/25/s10.jpg", desc: "Cu·ªën 'ƒê∆∞·ªùng K√°ch m·ªánh' c·ªßa Nguy·ªÖn √Åi Qu·ªëc, t√†i li·ªáu hu·∫•n luy·ªán ch√≠nh tr·ªã cho thanh ni√™n Vi·ªát Nam." },
      { img: "https://resource.kinhtedothi.vn/2021/12/25/cc6745ee-c491-49a0-9ccf-75a57b2795e6.jpg", desc: "Nguy·ªÖn √Åi Qu·ªëc tham d·ª± ƒê·∫°i h·ªôi Tours nƒÉm 1920 ‚Äì n∆°i Ng∆∞·ªùi t√¨m th·∫•y con ƒë∆∞·ªùng c·ª©u n∆∞·ªõc." },
      { img: "https://file.qdnd.vn/data/images/0/2020/01/11/tuanson/1%208.jpg?dpi=150&quality=100&w=575", desc: "Th√¥ng ƒëi·ªáp m·∫°nh m·∫Ω v·ªÅ ƒëo√†n k·∫øt to√†n d√¢n quanh ƒê·∫£ng v√† B√°c H·ªì." },
      { img: "https://hnm.1cdn.vn/2025/01/29/9-1-.jpg", desc: "Nh√¢n d√¢n S√†i G√≤n ƒë√≥n ch√†o qu√¢n gi·∫£i ph√≥ng tr∆∞a 30-4-1975." },
      { img: "https://file3.qdnd.vn/data/images/0/2025/01/16/upload_2049/trien-lam1.jpg?dpi=150&quality=100&w=870", desc: "Nguy·ªÖn √Åi Qu·ªëc gi·∫£ng d·∫°y t·∫°i l·ªõp hu·∫•n luy·ªán ch√≠nh tr·ªã ·ªü Qu·∫£ng Ch√¢u (Trung Qu·ªëc)." }
    ];

    const board = document.getElementById("game-board");
    const desc = document.getElementById("description");
    const previewImg = document.getElementById("preview-img");
    const timeDisplay = document.getElementById("time");
    const scoreDisplay = document.getElementById("score");
    const restartBtn = document.getElementById("restart");
    const playAgainBtn = document.getElementById("play-again");
    const retryBtn = document.getElementById("retry");
    const fireworks = document.getElementById("fireworks");
    const finalDisplay = document.getElementById("final-display");
    const losePopup = document.getElementById("lose-popup");
    const finalImg = document.getElementById("final-img");
    const finalDesc = document.getElementById("final-desc");
    const mainContent = document.getElementById("main-content");

    let firstCard = null, secondCard = null;
    let score = 0;
    let timeLeft = 120;
    let timer, fireworkTimer;
    let lastDesc = "", lastImg = "";

    function startGame() {
      board.innerHTML = "";
      desc.textContent = "Ch∆∞a c√≥ g√¨ ƒë·ªÉ hi·ªÉn th·ªã.";
      previewImg.src = "";
      previewImg.classList.add("hidden");
      score = 0;
      scoreDisplay.textContent = score;
      stopFireworks();
      finalDisplay.style.display = "none";
      losePopup.style.display = "none";
      mainContent.style.display = "flex";
      timeLeft = 120;
      updateTime();

      const allCards = [...cardsData, ...cardsData]
        .map((c, i) => ({ ...c, id: i }))
        .sort(() => Math.random() - 0.5);

      allCards.forEach((c) => {
        const card = document.createElement("div");
        card.className = "card";
        card.dataset.img = c.img;
        card.dataset.desc = c.desc;
        card.innerHTML = `
          <div class="card-inner">
            <div class="card-front">?</div>
            <div class="card-back" style="background-image:url(${c.img})"></div>
          </div>`;
        card.addEventListener("click", () => flipCard(card));
        board.appendChild(card);
      });

      clearInterval(timer);
      timer = setInterval(() => {
        timeLeft--;
        updateTime();
        if (timeLeft <= 0) {
          clearInterval(timer);
          showLosePopup();
        }
      }, 1000);
    }

    function updateTime() {
      const m = String(Math.floor(timeLeft / 60)).padStart(2, "0");
      const s = String(timeLeft % 60).padStart(2, "0");
      timeDisplay.textContent = `${m}:${s}`;
    }

    function flipCard(card) {
      if (card.classList.contains("flipped") || card.classList.contains("matched") || !timeLeft) return;
      if (!firstCard) {
        firstCard = card;
        card.classList.add("flipped");
      } else if (!secondCard && card !== firstCard) {
        secondCard = card;
        card.classList.add("flipped");
        checkMatch();
      }
    }

    function checkMatch() {
      if (firstCard.dataset.img === secondCard.dataset.img) {
        desc.textContent = firstCard.dataset.desc;
        previewImg.src = firstCard.dataset.img;
        previewImg.classList.remove("hidden");
        lastImg = firstCard.dataset.img;
        lastDesc = firstCard.dataset.desc;

        setTimeout(() => {
          firstCard.classList.add("matched");
          secondCard.classList.add("matched");
          score++;
          scoreDisplay.textContent = score;
          if (score === cardsData.length) {
            clearInterval(timer);
            showVictory();
          }
          firstCard = null;
          secondCard = null;
        }, 300);
      } else {
        setTimeout(() => {
          firstCard.classList.remove("flipped");
          secondCard.classList.remove("flipped");
          firstCard = null;
          secondCard = null;
        }, 800);
      }
    }

    function showVictory() {
      mainContent.style.display = "none";
      finalDisplay.style.display = "flex";
      finalImg.src = lastImg;
      finalDesc.textContent = lastDesc;
      startFireworks();
    }

    function showLosePopup() {
      mainContent.style.display = "none";
      losePopup.style.display = "flex";
    }

    function startFireworks() {
      fireworks.style.display = "block";
      const ctx = fireworks.getContext("2d");
      fireworks.width = window.innerWidth;
      fireworks.height = window.innerHeight;
      const particles = [];
      function createFirework(x, y) {
        for (let i = 0; i < 60; i++) {
          particles.push({
            x, y,
            angle: Math.random() * Math.PI * 2,
            speed: Math.random() * 6 + 2,
            alpha: 1,
            radius: Math.random() * 3 + 2
          });
        }
      }
      function animate() {
        ctx.clearRect(0, 0, fireworks.width, fireworks.height);
        particles.forEach((p, i) => {
          p.x += Math.cos(p.angle) * p.speed;
          p.y += Math.sin(p.angle) * p.speed + 1;
          p.alpha -= 0.01;
          ctx.fillStyle = `rgba(${Math.random()*255},${Math.random()*255},${Math.random()*255},${p.alpha})`;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
          ctx.fill();
          if (p.alpha <= 0) particles.splice(i, 1);
        });
        requestAnimationFrame(animate);
      }
      fireworkTimer = setInterval(() => {
        createFirework(Math.random() * fireworks.width, Math.random() * fireworks.height * 0.5);
      }, 300);
      animate();
    }

    function stopFireworks() {
      clearInterval(fireworkTimer);
      const ctx = fireworks.getContext("2d");
      ctx.clearRect(0, 0, fireworks.width, fireworks.height);
      fireworks.style.display = "none";
    }

    restartBtn.onclick = startGame;
    playAgainBtn.onclick = startGame;
    retryBtn.onclick = startGame;

    startGame();
  </script>
</body>
</html>
